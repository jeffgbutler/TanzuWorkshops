---
apiVersion: v1
kind: Secret
metadata:
  name: testsecret-tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZuRENDQTRTZ0F3SUJBZ0lVV0VIcnZNeVhDbVY0eUFWNTZwYWRjK0I1enNnd0RRWUpLb1pJaHZjTkFRRU4KQlFBd0hURUxNQWtHQTFVRUJoTUNWVk14RGpBTUJnTlZCQU1NQlUxWkxVTkJNQjRYRFRJek1Ea3hPVEl4TVRjMApNRm9YRFRJME1Ea3hPREl4TVRjME1Gb3daREVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnTUNrTmhiR2xtCmIzSnVhV0V4RWpBUUJnTlZCQWNNQ1ZCaGJHOGdRV3gwYnpFTE1Ba0dBMVVFQ2d3Q1NWUXhIekFkQmdOVkJBTU0KRm01bmFXNTRMakV5Tnkwd0xUQXRNUzV1YVhBdWFXOHdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDRHdBdwpnZ0lLQW9JQ0FRQ2hheDhRTWppYWoxOVRDQXJtQUVWMTBsVnhUNlB3Q2hHcEQzSlMxbitvcEh3WGtYNjE1QXVPCmxjcnhGdzdlYXF1blM5a2NsdHFpeW55Nlp4bTF1Y3lXMmR2VmdnWUwwVE5xY3JzRUpZZGlrZVlEN3E1QWYwZUgKNVFXdzI2cVNjTXNvODVLakx6MmRCTXoySDYxeldVS0NyTlFmL0VtNkxUd2d2TDFTbnBNcVhwdk5QeXJLNjhWQwpnd2xkeno4TE03T0lEbjcxWkJZQUE4SVMxWlBtTE52QXJrTVg3bFVuY3dFa3o0WGZ4c0lyUjNLODkvUUMvQjl5CjJZYnE0RWNDMW5oa2U2UHczUklvV1ZnaU5zcDdheGd2R2I0RmxjYkZBTUIzWG1ZWWVRaEIwN3ZieGVJNmlMdDkKTDB4TEJHMEk4NmFGS3hRVjU1MTdRS3psbWJ2Vk5HTU5mOWpSdGVteWF6TjN1VTNTRTRuWFc1alliWU5wRFJXegorY0lSb1R2NUYxSmpUSS9jRzAwY084WFh2cG9mOFhQQk4wWEJrTW81UVZnQXRwZGZWWFVDQ0VRNS96YzJ4VkxUCnQxRUJJQkVNeFBmZGNXUm9iNmZlSW1najk2eHJkVFNkaHYxQzl4Q25PM094M1NidUdZc0RtWGZMTVcrVlhiUlkKYXBVU0NtNVJOREtsUWFQMGtSaUE5MEhIQVd6UGRzWnBlckkxOXBnQ3dQTmFFVm5US0FRcyttT20yUXAvSWRoWgo4dkJ4K1piTGV0WHNWVFdCYUVMa1N2RE9oZ2dKUjgxb0dhV25tYTllMDZnSm9MVmQxbkRqbkJiclg2b21paTB2CklyNG0rbjBFTktzNU9xMVhud0IyOWlTVE4zOVNXV0cwR05mamQvUE9pQWVyQTl4V1RldHBhUUlEQVFBQm80R00KTUlHSk1COEdBMVVkSXdRWU1CYUFGQnh2eE83RklkRldBdnlSR1dZMk8ybUhrbVJsTUFrR0ExVWRFd1FDTUFBdwpFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUhBd0V3SndZRFZSMFJCQ0F3SG9JV2JtZHBibmd1TVRJM0xUQXRNQzB4CkxtNXBjQzVwYjRjRWZ3QUFBVEFkQmdOVkhRNEVGZ1FVQUZUc1NQOEtTMEx1QVExbVA1UENqUTE2azFrd0RRWUoKS29aSWh2Y05BUUVOQlFBRGdnSUJBRUZmQkRUakRSRm1uK2lLSGY0Q1I4V0l2L0VzNjZlL1NZNUttbzA3Z0lSSQpCbFVUQnRxTUZORWFJL0lZbit5MU5iK2FMVTdrQjhHRU0rbnZjWXhwQ1RCYzBQaU40K1J3RmRhZ21SZ1ZPMWx0CldQdkhVOU9RdTJKWmxENEdTa0traVBRbm9KOXF2NUExc1FoSFBTYk95MTJmK1YzKzBiOU9rQjh3c1Z0QlNoRncKL2JQWVRNYnpjNEFMa3BHOVd4UVdwQS9TVnhWK1hINC9HZ2xib24vdjN1akhXKzJHbkNzQnl4SmxRZXpFMXYxRQphWmFzL2Q0aml5L3pxZHFHVXFBakVhM3BBSzlFVldMM0ZBY2N1ajFNTGRPQVR5b29FdmFyWXE4Y3RnNndqUzBuClp2V3VtcW9PZDN2OVcvUjY0VXA0REkvYyt2SWoxQUtPVVBZcjhCTjZ2ZFpvNEhKMVRyYzBtdXg4SDlxNkNxSFMKaFZJU2V1UWFmMk9LdXVNL1RPUXMzTnRBdTFGenY2TFFlT3AvdW81a2lzNTVVQUgwMUpTcTZ5aWx2WWVBcE95TApnclZoR29xYUdDTXc0dkkyY1AxcUsxMUJEbkNwUVNQU0pSM0x3TVNqTTdmZjR2MEw3WHNYSUpUR3dpekd1bklkCkE0RG8yd0tSMXVydjdTWG1qQWcwbS9wSm1CZ1hTWFVGM0w0NGJuemVGclB6QUhjVGY3QWJZL3hlZW5WOEtHa2UKc09OTjN2TWU1SU5vK0RWKzd5cktYeXRWTjdGOHRVd2t5Wm5XYktYemZ2c2Rtemk4OHJMVi9QYUJPSUNlZnZROApuV3hCMS9JT09JTE01N2dCRW02RzF6Ri83bXUzdkM1Y0FJclRmcGtFalB6enNFazlpKzFISXMxVTJmVUpsSEF5Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRUUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Nzd2dna25BZ0VBQW9JQ0FRQ2hheDhRTWppYWoxOVQKQ0FybUFFVjEwbFZ4VDZQd0NoR3BEM0pTMW4rb3BId1hrWDYxNUF1T2xjcnhGdzdlYXF1blM5a2NsdHFpeW55NgpaeG0xdWN5VzJkdlZnZ1lMMFROcWNyc0VKWWRpa2VZRDdxNUFmMGVINVFXdzI2cVNjTXNvODVLakx6MmRCTXoyCkg2MXpXVUtDck5RZi9FbTZMVHdndkwxU25wTXFYcHZOUHlySzY4VkNnd2xkeno4TE03T0lEbjcxWkJZQUE4SVMKMVpQbUxOdkFya01YN2xVbmN3RWt6NFhmeHNJclIzSzg5L1FDL0I5eTJZYnE0RWNDMW5oa2U2UHczUklvV1ZnaQpOc3A3YXhndkdiNEZsY2JGQU1CM1htWVllUWhCMDd2YnhlSTZpTHQ5TDB4TEJHMEk4NmFGS3hRVjU1MTdRS3psCm1idlZOR01OZjlqUnRlbXlhek4zdVUzU0U0blhXNWpZYllOcERSV3orY0lSb1R2NUYxSmpUSS9jRzAwY084WFgKdnBvZjhYUEJOMFhCa01vNVFWZ0F0cGRmVlhVQ0NFUTUvemMyeFZMVHQxRUJJQkVNeFBmZGNXUm9iNmZlSW1nago5NnhyZFRTZGh2MUM5eENuTzNPeDNTYnVHWXNEbVhmTE1XK1ZYYlJZYXBVU0NtNVJOREtsUWFQMGtSaUE5MEhICkFXelBkc1pwZXJJMTlwZ0N3UE5hRVZuVEtBUXMrbU9tMlFwL0lkaFo4dkJ4K1piTGV0WHNWVFdCYUVMa1N2RE8KaGdnSlI4MW9HYVdubWE5ZTA2Z0pvTFZkMW5Eam5CYnJYNm9taWkwdklyNG0rbjBFTktzNU9xMVhud0IyOWlTVApOMzlTV1dHMEdOZmpkL1BPaUFlckE5eFdUZXRwYVFJREFRQUJBb0lDQUVRNldBM3JmRnR3SUhXakg2QXFHekg2CjdweVBjaGJDMnNZZnZrM2ZWbVE4NmlxNEY5dmdBVGFLZ0JZNWpkSmJPaVRqZldpRkp2TEtMY0JJVmVpbkdSL20KQS9LU0crWWd6ZCsva09ibXlmdlMrV3RPRnA4eWJWUzJiQnBlTHhIbzFTYUJGY2tkN2FnUjRHUmo3VmVsTWVTMApFcEZXZlA5Um9XbWcvVkVQcjlxbjFLa0RleDM4WEF1S0FZcUNULzUzSXZwdVRpR0E1WCtxRnYwSkE1TzJBRWpJCkg1bmM1bWRmUit0OFAvVGZPVEU3NlBhUXc3WURSWE94R0VMcyszYnFta2Eyc0F2ZUZZK3llL3N5TjVIRktacTMKQWNld2tDeXk3YWRHNGxhVHlmYXcvV1dlbGNueUEzV2RhVjBJQ09KUXdtRGxYWDhJd0ZyWmNuczE2TnZzWWJVbQpLVldDdVUxejZYV2xtUDBOWVFqVklRd0o1eVJYWER3Sy9uM1ZPNWYyNWtuYmdteXJ6VkxwT1UrUHNzK0hiNjBmCjdycVF6S0w4SGFML2g0SHB5K2dWREFLdW9XV3V0N05jREFKZ0w0bGZ1SGV0SVZsRm9BZE5BVW1XaGJ4Wmc3RHMKRDRMQnp3ZDhhVDB0eHpnNExGUkVUZjd6T2lzRHY2SEVzZ1RKKzlieVU4citJZ01tRHFENFQ2Rm1jVWpwZE9mMgpDekc4SjFpTnl6TW80V2FkTzNld3JqMmU4cjV4TVE2T3IvdzZwMjFlWFhFSXVodU93dkFLUC9wcENXVm1HZDRmCkZhUVhRYS8zNzYzakN5b1d4Vi9VN25ieThaUkNyR3NsczNCQk5ad1ZBM3JyalN4Zm9FdDE3SW9MK0RCZW1SU20KRE1GbXAzb0xYUW84VkRtT3E5RmxBb0lCQVFETjV3M0J3T1FQVlhscDFhbTE1U2ttTldZc0RDd2h3elRFQWU5NwpyS1drTFVaM3NZRXVHN2xvd05TNGtqUW5MdXlraDJ2eVNOYXA0Mmc1MGZpdjVJeWJ2Y1duRlcrTkFScUFzdEVNCmlaaFJGaTNaZnd5QmNnbGVBRDk1Vm9GcE9xNFVFTHMzNjRHUFFnV3ZlbGlHSEEvc2RHQmtBQW0yM3JaVmtFbU0KbWxkR2ZQeEtmRzVpRWhKbGs3eXRTS1hjZGw4em9FY2JzL2VtSDV3WERWUElXZDNxWlNkc0IvOCsraFkwUVVPMApkZWk4bHRZTmsvTTV2dVFPUTlKTmUwUnB2aDJRTjByZldkdU5xcjdhdTNkakdKd1k2REVoUlV1alllTnZnUDc3CnNlMUtlUGtBcDFFQ3NRbk93dHE1QzVnQlZWSFNGajdKeDFlcFJGb2tPTnRBeFFsSEFvSUJBUURJc1U4SGVkZnoKR0xvOGw1NS9QcWJqUW8zWjk5S1NkLzdRcVYwalZvUXh3anI0VmNOMG5saXpJbHNPOUhBU1A5V3g3MS90aHltLwp5Zjdta0VrbEdXa0Zyeml2Smt0ZmZaZW1nSHRJUEFVdW5pQm1PMDArOWNtMGEvaktLTk53alRrWTJoT2E4RTkrCjdCakdrQVRJOXUvbVFNZFlZWmtJd3R2WkZIcm1SU2g2QnNCcGRDbGpnb2xPTHV6eStvUlBtTEY4UHBTNmNXZWMKZ2JsTS93ZkY1UHZ1OU16empkU28wNk9nMUQvVkVaVGQyRk9kUjhmSkUyd2FRcEp1ekszeittdjBaM2RtWUd6Swp6WXJyNU16dmJVQ0lRTjZwTHpKaE1TMFhUMlpDUWdIS3lkQVVpZm91dklEbXAybFRnU0plWktYSTM2VjdDRGpICkdEWmlTRFAzWkUvUEFvSUJBRHVWY2xpd1RnN1Y2RVdsSy9CVU9WMHlOTGZvYWRqM1dVeWpWcjhPVGZ5OWtWZlAKeVJjanRMckltb1l5NE42NTZJY1FIVC9HcmtBSmE3N1hzVVNOT2RkVHlsKzRoMGhobWw3RjRGTGxlbXQwcEozOAo4d3graUpGb052WVEvM0FKS0Jqc1lwRWpHS0h4TkIzOHBLTmllWVV1aERwTC9JT3IzVTNUYkVWQTRLS29Sb1h6CmppblpHdlBFRmVSN1Vtd0M0VGZhV05sK2Nkcmo2TktPNjhEZHFLZE0wR1NseDhwY3FwSkNsS29qT005aVF0MDUKQkRpZ3NmUWkwamZUeFE5b2tidUxGS0tmcVRaTXcrQWVRY1V1ZVBXSU03ZHlDeHBqbUdKTERQNmZGWkRvZ3Y0YQpiUW4vVzF3MjdQNkJpV0pSWTFVTlZPd2xRSXZlR012RW5FWVkvcjhDZ2dFQWFlY2VzK3c0NTEvNkRyVlhmdi81Cm90emc2ODlaZjg3d1dQMjJWMHAxTWFpejQ0Mm1PV2pCbDYyZWJYTFJuTit3alZlcXdEWGQ4d1hOaTY5QjJlRGgKeVkwZ0ZWVFkyMGZ6K1htOUZHNFBzZnpoVGZFbkh2MG1kaDJ2eUVYbzVYQ3dXNHZnWXBkQzY4Lzhkdk5TZ3hYRApuRFk4dTBldE1MRmF2OStOeHV0aG81cmllQU5EUCs2SE5BbVJJZHJPYlE0L1FqZm4xY2E0RFI5clA5VW9MZVphCmgwc0l4OURsRWoyMEQ4OVE2OGQrVGQ2MHFMOVREcWxBRjA5ZjVEWC82VW9SSTRSaHZsVk5zMnJwVHZlS3FTRjIKdHkrOEQzMEhVY0JZY2YrRkQ1dXpSR1pnZGlZbExmcHM3c29TeTJ6T1RROUJhSkdUeWl1WmduNGxYSkdMVXBYTgpnd0tDQVFCTHExdUxpejBLcUZwZlp4MnI3UTloWTB2MWcrTUFJZFRWR1JmL3AyMnptU21WekplYlV5eUdYYUloCnVWeEVKZ2ZXOUhGUEU0QklPNE1KUlgwNTJRNFpjMFFHc3htaktDQlpVNlpJSTljcGtzRG1sbmsrWWRyOWlsbkYKV1pJcCtaanZGZ2NUTGRjb0t5cittM3E2SUczSXJ2UEpMUnNzR25YdzlRRklpUjc4c0VsOXNwTnNsTk40Ny9iTApWeVhYT0JqR3J2MlRKRGQvTkR4eTJqd2NvMDZyYWx4QzY5YzBpanhJL1lsc0FSK0VEVU5lbmFEQWRJY1FCNDRGCk05ME5WUnRkNW90dklwQ3V4RlJuOHlGdU01ZkRzakxXZGxiUVVNRUdJOXN4ZjEwZWJSTmdpUGg2b0NMNDNuNUEKTzFVcnVBVHNuVnorWFp1S05BcVFFVEV5SlFqbQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
type: kubernetes.io/tls
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - image: nginx
        name: nginx
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: nginx
  name: nginx
spec:
  ports:
  - name: default
    port: 8080
    protocol: TCP
    targetPort: 80
  selector:
    app: nginx
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx
  labels:
    app: ingress
spec:
  tls:
  - hosts:
    - nginx.127-0-0-1.nip.io
    secretName: testsecret-tls
  rules:
  - host: nginx.127-0-0-1.nip.io
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx
            port:
              number: 8080
